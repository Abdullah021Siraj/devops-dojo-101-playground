; =====================================
; PHP-FPM pool config for small VPS
; =====================================
[www]
user = www-data
group = www-data

listen = /var/run/php-fpm.sock
listen.owner = www-data
listen.group = www-data
listen.mode = 0660

; Dynamic process manager
pm = dynamic

; Adjust based on 1 GB free RAM (~128 MB per PHP process)
pm.max_children = 6
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3

; Recycle PHP processes
pm.max_requests = 200

; Logging
access.log = /var/log/php-fpm/access.log
slowlog = /var/log/php-fpm/slow.log
request_slowlog_timeout = 5s
